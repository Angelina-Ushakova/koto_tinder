# КотоТиндер

## Содержание
- [Реализованные функции](#реализованные-функции)
- [Технические особенности](#технические-особенности)
- [Структура проекта](#структура-проекта)
- [Особенности реализации](#особенности-реализации)
- [Демонстрация работы приложения](#демонстрация-работы-приложения)
- [Скачать приложение](#скачать-приложение)

## Реализованные функции

- **Карточки с котиками**: Отображение случайных изображений котиков с указанием породы
- **Жесты**: Возможность "свайпать" карточки влево (дизлайк) или вправо (лайк)
- **Кнопки интеракции**: Альтернативные кнопки лайк/дизлайк в нижней части экрана
- **Счетчик лайков**: Отслеживание количества понравившихся котиков в верхней части экрана
- **Детальный просмотр**: Экран с подробной информацией о породе при нажатии на карточку
- **Внешние ссылки**: Интеграция с Wikipedia для получения дополнительной информации
- **Анимации**: Плавные анимации при свайпе и визуальная обратная связь (зеленая/красная подсветка)
- **Оптимизация изображений**: Адаптация загрузки для мобильных устройств и веб-версии
- **Кеширование**: Предзагрузка и кеширование изображений для быстрой работы приложения

## Технические особенности

### Статический анализ кода
- **Форматирование**: Код отформатирован с помощью `dart format` ✅
- **Линтинг**: В `analysis_options.yaml` настроены правила для поддержания качества кода ✅
- **Анализ**: Команда `flutter analyze` выполняется без проблем ✅

### Реализация требований

1. **HTTP запросы к API**
   - В классе `CatApiService` использован пакет `http` для запросов к The Cat API ✅
   - Реализован обработчик ошибок и таймаут для повышения надежности

2. **Endpoint для случайных изображений**
   - Метод `getRandomCat()` в `CatApiService` обращается к endpoint `/search` для получения случайных котиков ✅
   - Параметр `limit=10` используется для получения нескольких котиков за один запрос

3. **Фильтрация изображений по породе**
   - Параметр `has_breeds=1` в URL запроса обеспечивает получение только котиков с информацией о породе ✅

4. **Оптимизированное отображение изображений**
   - На экранах `HomeScreen` и `DetailScreen` используется виджет `CachedNetworkImage` для:
     - Оптимального отображения изображений с индикатором загрузки ✅
     - Кеширования для быстрой повторной загрузки ✅
     - Обработки ошибок при загрузке изображений ✅

5. **Навигация между экранами**
   - В методе `_openDetailScreen()` на главном экране используется `Navigator.push()` для открытия детальной информации ✅
   - Передача данных между экранами через конструктор `DetailScreen`

6. **Использование основных виджетов компоновки**
   - В интерфейсе используются `Row` и `Column` для организации элементов интерфейса:
     - На главном экране для размещения карточки и кнопок ✅
     - На экране деталей для информации о породе ✅

7. **StatefulWidget для управления состоянием**
   - Класс `HomeScreen` наследует `StatefulWidget` для хранения и управления:
     - Текущим котиком, счетчиком лайков ✅
     - Состоянием загрузки и анимациями ✅
     - Позицией свайпа и обработкой жестов ✅

8. **Компонентный подход к кнопкам**
   - Выделен отдельный класс `LikeDislikeButton` (StatelessWidget) для единообразного создания кнопок взаимодействия ✅

9. **Кастомная иконка приложения**
   - Настроен пакет `flutter_launcher_icons` для создания кастомных иконок на Android и iOS ✅

## Структура проекта

- **/lib/models/** - Модели данных для котиков и пород
- **/lib/screens/** - Экраны приложения (главный и детальный)
- **/lib/services/** - Сервисы для работы с The Cat API
- **/lib/widgets/** - Переиспользуемые компоненты интерфейса
- **/lib/utils/** - Вспомогательные утилиты
- **/assets/icon/** - Ресурсы для иконок приложения

## Особенности реализации

### Адаптивная загрузка изображений

Реализован умный механизм загрузки изображений, учитывающий особенности разных платформ:

- **Для веб-платформы (Chrome):** Используется специальный прокси-сервис для обхода CORS-ограничений браузера. Это необходимо, потому что The Cat API не имеет соответствующих CORS-заголовков, что блокирует прямую загрузку изображений в браузере.

- **Для мобильных устройств:** Используются прямые URL к изображениям, так как в нативных приложениях нет CORS-ограничений, что позволяет избежать дополнительной задержки, связанной с использованием прокси.

Это решение позволяет запускать приложение как на мобильных устройствах, так и в веб-браузере без изменения кода, оптимизируя производительность в зависимости от платформы.

### Кеширование и предзагрузка данных

Для повышения отзывчивости интерфейса реализованы:

- **Кеширование данных:** В `CatApiService` хранится локальный кеш котиков, что позволяет избежать повторных запросов к API при перезагрузке.
- **Предзагрузка изображений:** Метод `preloadMoreCats()` асинхронно загружает следующую партию котиков, когда пользователь подходит к концу кеша.
- **Кеширование изображений:** `CachedNetworkImage` сохраняет изображения в памяти и на диске устройства для быстрой повторной загрузки.

### Анимации и жесты

Интерфейс включает анимации для улучшения пользовательского опыта:

- **Жесты свайпа:** Обработчики `onHorizontalDragStart`, `onHorizontalDragUpdate` и `onHorizontalDragEnd` для определения направления свайпа.
- **Плавные переходы:** Используется `AnimationController` для управления анимацией перемещения карточки.
- **Визуальная обратная связь:** При свайпе отображается цветной оверлей (зеленый для лайка, красный для дизлайка) с соответствующей иконкой.

## Демонстрация работы приложения

Смотреть: koto_tinder/assets/demo/hw2_like.gif и koto_tinder/assets/demo/no_internet2.gif

<table>
  <tr>
    <td>
      <img src="https://raw.githubusercontent.com/Angelina-Ushakova/koto_tinder/main/koto_tinder/assets/demo/hw2_like.gif" width="250"/>
    </td>
    <td>
      <img src="https://raw.githubusercontent.com/Angelina-Ushakova/koto_tinder/main/koto_tinder/assets/demo/no_internet2.gif" width="250"/>
    </td>
  </tr>
</table>

Изначально видеозаписи были гораздо быстрее, но из-за того, что .gif очень тяжёлые - демоснтрация выше может загружаться плохо

## Скачать приложение

[Скачать APK](https://github.com/Angelina-Ushakova/koto_tinder/releases/download/v1.0.0/app-release.apk)
